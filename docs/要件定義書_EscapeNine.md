# Escape Nine: Endless - 要件定義書

## 📋 目次
1. [ゲーム概要](#ゲーム概要)
2. [基本ルール](#基本ルール)
3. [ゲームモード](#ゲームモード)
4. [キャラクター仕様](#キャラクター仕様)
5. [階層システム](#階層システム)
6. [収益化](#収益化)
7. [技術仕様](#技術仕様)
8. [UI/UX](#uiux)
9. [開発ロードマップ](#開発ロードマップ)

---

## ゲーム概要

### 基本情報
- **タイトル**: Escape Nine: Endless
- **略称**: E9 / エスナイン
- **ジャンル**: 音ゲー × 戦略型 エンドレスチャレンジ
- **プラットフォーム**: iOS (初期リリース)
- **価格**: 基本無料 + 広告削除課金
- **ターゲット層**: カジュアルゲーマー、音ゲー好き

### コンセプト
9マスの盤面で音楽のビートに合わせて逃げ続ける、ハイスピードエンドレスチャレンジ。
- **リズムゲーム要素**: 音楽のビートに合わせて移動
- **スコアアタック**: 何階層まで到達できるか
- **徐々に加速**: 90階層付近は人間限界の超高速
- **シンプル**: スタミナ・コイン・複雑な要素なし
- **ドット絵**: 64×64ピクセルのレトロ風ビジュアル

### キャッチコピー
- 「音に乗れ。限界を超えろ。」
- 「100階層への挑戦 - Escape Nine: Endless」
- 「ビートが速まる。逃走が始まる。」

---

## 基本ルール

### ゲームの目的
- **音楽のビートに合わせて移動し、できるだけ高い階層に到達する**

### 盤面
- 3×3 = 9マスのグリッド
```
1  2  3
4  5  6
7  8  9
```

### 移動ルール
- **移動タイミング**: 音楽のビート(ドン・ドン・ドン)に合わせて移動
- **タイミング判定**: ビートのタイミングから外れたら即アウト
- **移動方向**: 基本は縦横斜め8方向
- **移動距離**: 1ビートで1マス
- **同時移動**: プレイヤーと鬼が同時に移動

### 勝敗条件
- **敗北条件**:
  - 鬼と同じマスに入る
  - ビートから外れた移動(タイミングミス)
  - 消失したマスに入る
- **階層クリア**: 10ターン逃げ切り → 次の階層へ

### テンポ(BPM)の変化
```
階層1-10   : BPM 60 (ゆっくり、初心者向け)
階層11-20  : BPM 80
階層21-30  : BPM 100
階層31-40  : BPM 120
階層41-50  : BPM 140
階層51-60  : BPM 160
階層61-70  : BPM 180
階層71-80  : BPM 200
階層81-90  : BPM 220
階層91-100 : BPM 240 (人間限界、ほぼ不可能)
```

### 初期配置
- ランダム配置

---

## ゲームモード

### 1. エンドレスモード(メインモード)
- 100階層までのスコアアタック
- 失敗したら1階層からやり直し
- スタミナ制限なし
- ランキング表示あり(到達階層でスコア)

### 2. プラクティスモード(練習)
- **AI難易度選択**: Easy / Normal / Hard (最初に選択、固定)
- **特殊ルール選択**: なし / 霧 / マス消失 / 霧+マス消失
- **階層選択**: クリアした階層まで練習可能
- **報酬なし**: スコアに記録されない

### 3. オンライン対戦(後回し)
- 将来的に実装予定

---

## キャラクター仕様

### プレイヤーキャラクター(逃げる側)

#### 勇者(無料・初期キャラ)
- **固有スキル**: ダッシュ
- **効果**: 2マス移動できる(1回につき)
- **使用回数**: 5回/試合
- **使い方**: 常時使用可能(ボタンではなく、自動適用or長押しで発動)
- **特徴**: バランス型、初心者向け

#### 盗賊(無料・階層10クリアで解放)
- **固有スキル**: 斜め移動
- **効果**: 通常は移動できない斜め方向に移動可能
- **使用回数**: 5回/試合
- **使い方**: 常時使用可能
- **特徴**: テクニカル、上級者向け

#### 魔法使い(有料 ¥240)
- **固有スキル**: 透明化
- **効果**: 5回まで鬼に当たっても無敵(透明状態)
- **使用回数**: 5回/試合
- **使い方**: 常時使用可能、鬼に触れるたび1回消費
- **特徴**: 超有能、事故死を防げる

#### エルフ(有料 ¥240)
- **固有スキル**: 拘束(蔦)
- **効果**: 鬼をタップすると、その鬼を1ターン停止させる
- **使用回数**: 5回/試合
- **使い方**: 鬼をタップで発動
- **特徴**: 超有能、戦略的

### 鬼キャラクター(階層で自動変化)

#### 赤鬼(階層1-25)
- **AI難易度**: 選択したレベル(Easy/Normal/Hard)
- **ビジュアル**: 赤い体、金色の角

#### 青鬼(階層26-50)
- **AI難易度**: 選択したレベル(Easy/Normal/Hard)
- **ビジュアル**: 青い体、銀色の角

#### 骸骨(階層51-75)
- **AI難易度**: 選択したレベル(Easy/Normal/Hard)
- **ビジュアル**: 骨、紫のオーラ

#### ドラゴン(階層76-100)
- **AI難易度**: 選択したレベル(Easy/Normal/Hard)
- **ビジュアル**: 小型ドラゴン、炎のエフェクト

---

## 階層システム

### 階層構成(全100階層)

#### 階層1-20(初級)
- **鬼**: 赤鬼
- **特殊ルール**: なし
- **BPM**: 60-80

#### 階層21-40(中級)
- **鬼**: 赤鬼(21-25)→青鬼(26-40)
- **特殊ルール**: 霧マップ(自分の位置のみ見える、周囲は真っ暗)
- **BPM**: 100-120

#### 階層41-60(上級)
- **鬼**: 青鬼(41-50)→骸骨(51-60)
- **特殊ルール**: マス消失(ランダムで1マス消える)
- **BPM**: 140-160

#### 階層61-100(超上級〜限界)
- **鬼**: 骸骨(61-75)→ドラゴン(76-100)
- **特殊ルール**: 霧マップ + マス消失(両方発動)
- **BPM**: 180-240

### AI難易度(ゲーム開始時に選択)

#### Easy(易しい)
- ランダムに近い動き
- 70%でランダム、30%で追跡

#### Normal(普通)
- 基本的な追跡
- プレイヤーに最短距離で近づく

#### Hard(難しい)
- 高度な戦略
- プレイヤーの次の手を予測して移動

### スコアシステム
- **スコア = 到達階層数**
- ランキング表示あり(Game Center連携)
- ランキング: 世界ランキング、フレンドランキング

---

## 収益化

### 価格設定

#### 有料キャラクター
- **魔法使い**: ¥240
- **エルフ**: ¥240
- **2キャラセット**: ¥480 (お得)

#### 広告削除
- **価格**: ¥240
- **効果**: リトライ時の広告を削除(ホーム画面バナーは残る)

### 広告配置

#### バナー広告(常時表示)
- ホーム画面下部のみ

#### インタースティシャル広告(全画面)
- リトライ時(ゲームオーバー後、リトライボタンを押すと表示)
- 広告削除課金で非表示

---

## 技術仕様

### 開発環境
- **フレームワーク**: SwiftUI
- **言語**: Swift 5.9+
- **最小iOS**: iOS 14.0
- **IDE**: Xcode 15.0+
- **アーキテクチャ**: MVVM + Combine

### バックエンド・サービス
- **Firebase**:
  - Authentication (認証)
  - Firestore (ランキングデータ)
  - Analytics (分析)
- **Google Mobile Ads SDK**: AdMob広告
- **StoreKit**: アプリ内課金
- **Game Center**: ランキング

### データ保存
- **ローカル**: UserDefaults / Core Data
  - 到達階層
  - 解放キャラ
  - 選択中のキャラ
  - AI難易度設定
- **クラウド**: Firebase Firestore
  - ランキングスコア

### グラフィック
- **スタイル**: ドット絵(ピクセルアート)
- **解像度**: 64×64ピクセル(ミッドファイ)
- **アニメーション**: 最小限(静止画のみ、移動はスライド)
- **制作方法**: AI生成 + 手直し

### 音楽・効果音
- **BGM**: Suno AIで作成
  - 階層ごとにBPMが変化するトラックを用意
  - ビート明確なEDM/テクノ系
- **効果音**: 
  - ビート音(メトロノーム的なクリック音)
  - 移動音
  - ゲームオーバー音
  - 階層クリア音

### 対応デバイス
- **iOS**: iOS 14.0以上
- **画面サイズ**: iPhone SE〜iPhone 15 Pro Max対応

---

## UI/UX

### 画面構成

#### ホーム画面
- タイトルロゴ
- プレイボタン(エンドレスモード)
- プラクティスボタン
- ランキングボタン
- ショップボタン(キャラ購入、広告削除)
- 設定ボタン
- キャラクター選択
- 最高到達階層表示
- バナー広告(下部)

#### 設定画面(ゲーム開始前)
- **AI難易度選択**: Easy / Normal / Hard
- **BGM音量**
- **効果音音量**
- **アカウント連携**

#### ゲーム画面
- 3×3のグリッド(中央)
- プレイヤーキャラクター
- 鬼キャラクター
- 階層数表示(上部)
- スキル残回数表示
- ビートインジケーター(視覚的なリズムガイド)
- 一時停止ボタン(右上)

#### リザルト画面
- 到達階層表示
- スコア表示
- ランキング順位
- リトライボタン(広告表示後にリトライ可能)
- ホームへ戻るボタン

#### ランキング画面
- 世界ランキング
- フレンドランキング
- 自分の順位表示

#### ショップ画面
- キャラクター購入(魔法使い、エルフ)
- 広告削除購入
- 購入履歴

#### プラクティス画面
- AI難易度選択
- 特殊ルール選択
- 階層選択(クリア済みのみ)
- スタートボタン

### カラーパレット
- **メインカラー**: #667eea (紫青)
- **アクセントカラー**: #764ba2 (濃い紫)
- **背景**: #1a1a2e (ダーク)
- **テキスト**: #eaeaea (明るいグレー)
- **警告**: #f03e3e (赤)
- **成功**: #37b24d (緑)

### フォント
- **メイン**: システムフォント(San Francisco / Roboto)
- **数字**: モノスペースフォント

---

## 開発ロードマップ

### MVP版(初回リリース)

#### 含む機能
- エンドレスモード(100階層)
- 音楽テンポ同期システム
- AI 3段階(Easy/Normal/Hard)
- 特殊ルール2種(霧、マス消失)
- キャラクター4種(無料2 + 有料2)
- プラクティスモード
- ランキングシステム
- 広告システム(バナー + リトライ)
- 課金システム(キャラ購入、広告削除)

#### 未実装(後回し)
- オンライン対戦
- 追加キャラクター
- 追加特殊ルール

### 開発スケジュール(目安: 2-3ヶ月)

#### フェーズ1: 基礎実装(2週間)
- [ ] プロジェクトセットアップ
- [ ] 9マスの盤面UI
- [ ] 基本移動システム
- [ ] 音楽同期システム(最重要)
- [ ] ビート判定システム

#### フェーズ2: キャラクター制作(1週間)
- [ ] 64×64ドット絵制作(AI生成)
  - [ ] 勇者、盗賊、魔法使い、エルフ
  - [ ] 赤鬼、青鬼、骸骨、ドラゴン
- [ ] キャラ切り替えシステム

#### フェーズ3: ゲームロジック(2週間)
- [ ] AIエンジン(Easy/Normal/Hard)
- [ ] 特殊ルール2種実装
- [ ] 階層システム
- [ ] スコア計算

#### フェーズ4: スキルシステム(1週間)
- [ ] 4種のスキル実装
- [ ] スキル残回数管理

#### フェーズ5: UI/UX(2週間)
- [ ] ホーム画面
- [ ] ゲーム画面
- [ ] リザルト画面
- [ ] ランキング画面
- [ ] ショップ画面
- [ ] プラクティス画面

#### フェーズ6: 音楽・効果音(1週間)
- [ ] BGM制作(Suno AI、BPM変化版)
- [ ] ビート音・効果音制作
- [ ] 音声実装

#### フェーズ7: 収益化(1週間)
- [ ] Firebase連携
- [ ] AdMob統合(バナー、インタースティシャル)
- [ ] 課金システム(キャラ、広告削除)
- [ ] Game Center連携(ランキング)

#### フェーズ8: テスト・調整(2週間)
- [ ] バグ修正
- [ ] ゲームバランス調整(BPM調整が重要)
- [ ] UI/UX改善
- [ ] TestFlight配信
- [ ] ベータテスト

#### フェーズ9: リリース準備(1週間)
- [ ] App Store申請資料
- [ ] スクリーンショット・プロモ動画
- [ ] アプリ説明文
- [ ] プライバシーポリシー
- [ ] 利用規約
- [ ] App Store審査申請

### アップデート計画(リリース後)

#### Ver 1.1(リリース1-2ヶ月後)
- オンライン対戦実装
- 新キャラ1種追加

#### Ver 1.2(リリース3-4ヶ月後)
- 新特殊ルール追加
- 新BGM追加

#### Ver 1.3(リリース6ヶ月後)
- シーズン制
- ランキング報酬

---

## 付録

### 参考ゲーム
- **Geometry Dash** (音楽同期アクション)
- **Beat Saber** (リズムゲーム)
- **Flappy Bird** (エンドレスチャレンジ)
- **Crossy Road** (ドット絵 + カジュアル)
- **Super Hexagon** (高速化するリズムゲーム)

### 必要なツール・サービス
- **開発**: VSCode, Cursor, Xcode
- **デザイン**: Aseprite(ドット絵), Figma(UI/UX)
- **音楽**: Suno AI
- **バックエンド**: Firebase
- **広告**: Google AdMob
- **分析**: Firebase Analytics, App Store Connect
- **バージョン管理**: Git, GitHub

---

## 変更履歴

- 2025-11-13: 初版作成
- 2025-11-13: 全面改訂(シンプル化、音ゲー要素追加、100階層化)

---

**Escape Nine: Endless**
© 2025 Souatou. All rights reserved.
